<?xml version="1.0" encoding="UTF-8"?>

<?import de.jensd.fx.glyphs.fontawesome.FontAwesomeIcon?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane style="-fx-background-color: #ECEFF1;" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.frontend.controller.transaction.PurchaseOrderController">
    <SplitPane dividerPositions="0.6" AnchorPane.bottomAnchor="0" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" AnchorPane.topAnchor="0">

    <!-- LEFT SIDE: Order Entry Form (60%) -->
    <VBox spacing="10" style="-fx-background-color: #ECEFF1; -fx-padding: 12;">

        <!-- Header -->
        <HBox alignment="CENTER" spacing="15" style="-fx-background-color: linear-gradient(to right, #00897B, #00796B); -fx-background-radius: 6; -fx-padding: 10;">
            <FontAwesomeIcon fill="white" glyphName="CLIPBOARD" size="1.5em" />
            <Label style="-fx-text-fill: white; -fx-font-size: 18px; -fx-font-weight: bold;" text="PURCHASE ORDER ENTRY" />
            <Region HBox.hgrow="ALWAYS" />
            <Button fx:id="btnBack" style="-fx-background-color: rgba(255,255,255,0.2); -fx-text-fill: white; -fx-font-size: 11px; -fx-background-radius: 4; -fx-cursor: hand; -fx-padding: 5 12;" text="BACK">
                <graphic>
                    <FontAwesomeIcon fill="white" glyphName="ARROW_LEFT" size="1em" />
                </graphic>
            </Button>
        </HBox>

        <!-- Section 1: Supplier & Order Info -->
        <HBox alignment="CENTER_LEFT" spacing="12" style="-fx-background-color: white; -fx-background-radius: 6; -fx-padding: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 4, 0, 0, 1);">
            <VBox spacing="3" HBox.hgrow="ALWAYS">
                <Label fx:id="lblSupplier" style="-fx-text-fill: #00897B; -fx-font-weight: bold;" text="paurvazadaracao naava">
                    <font><Font name="Kiran" size="25.0" /></font>
                </Label>
                <TextField fx:id="txtSupplier" prefHeight="38" promptText="paurvazadaracao naava Saaoqaa" style="-fx-background-color: #FAFAFA; -fx-border-color: #E0E0E0; -fx-border-radius: 4; -fx-background-radius: 4;">
                    <font><Font name="Kiran" size="22.0" /></font>
                </TextField>
            </VBox>
            <VBox spacing="3">
                <Label style="-fx-text-fill: #616161; -fx-font-size: 12px;" text="Order Date" />
                <DatePicker fx:id="dpOrderDate" prefHeight="38" prefWidth="130" style="-fx-font-size: 12px;" />
            </VBox>
            <VBox alignment="CENTER" spacing="2" style="-fx-background-color: #00897B; -fx-background-radius: 4; -fx-padding: 6 12;">
                <Label style="-fx-text-fill: rgba(255,255,255,0.7); -fx-font-size: 9px;" text="ITEMS" />
                <Label fx:id="lblItemCount" style="-fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold;" text="0" />
            </VBox>
        </HBox>

        <!-- Section 2: Item Entry -->
        <VBox spacing="8" style="-fx-background-color: white; -fx-background-radius: 6; -fx-padding: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 4, 0, 0, 1);">
            <!-- Row 1: Category, Item Name, Quantity -->
            <HBox alignment="CENTER_LEFT" spacing="10">
                <VBox spacing="3">
                    <Label fx:id="lblCategory" style="-fx-text-fill: #00897B; -fx-font-weight: bold;" text="k^TogaorI">
                        <font><Font name="Kiran" size="25.0" /></font>
                    </Label>
                    <TextField fx:id="txtCategory" prefHeight="38" prefWidth="200" promptText="k^TogaorI SaaoQaa..." style="-fx-background-color: #FAFAFA; -fx-border-color: #E0E0E0; -fx-border-radius: 4; -fx-background-radius: 4;">
                        <font><Font name="Kiran" size="20.0" /></font>
                    </TextField>
                </VBox>
                <VBox spacing="3" HBox.hgrow="ALWAYS">
                    <Label fx:id="lblItemName" style="-fx-text-fill: #00897B; -fx-font-weight: bold;" text="maalaacao naava">
                        <font><Font name="Kiran" size="25.0" /></font>
                    </Label>
                    <TextField fx:id="txtItemName" prefHeight="38" promptText="maalaache naava SaaoQaa" style="-fx-background-color: #FAFAFA; -fx-border-color: #E0E0E0; -fx-border-radius: 4; -fx-background-radius: 4;" HBox.hgrow="ALWAYS">
                        <font><Font name="Kiran" size="20.0" /></font>
                    </TextField>
                </VBox>
                <VBox spacing="3">
                    <Label fx:id="lblUnit" style="-fx-text-fill: #616161;" text="yaunaIT">
                        <font><Font name="Kiran" size="25.0" /></font>
                    </Label>
                    <ComboBox fx:id="cmbUnit" prefHeight="38" prefWidth="100" promptText="Unit" style="-fx-font-size: 14px; -fx-background-color: #FAFAFA; -fx-border-color: #E0E0E0; -fx-border-radius: 4; -fx-background-radius: 4;" />
                </VBox>
                <VBox spacing="3">
                    <Label fx:id="lblQty" style="-fx-text-fill: #616161;" text="naga">
                        <font><Font name="Kiran" size="25.0" /></font>
                    </Label>
                    <TextField fx:id="txtQty" alignment="CENTER" prefHeight="38" prefWidth="120" promptText="0" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-background-color: #FAFAFA; -fx-border-color: #E0E0E0; -fx-border-radius: 4; -fx-background-radius: 4;" />
                </VBox>
            </HBox>
            <!-- Row 2: Action Buttons -->
            <HBox alignment="CENTER_LEFT" spacing="8">
                <Button fx:id="btnAddItem" prefHeight="36" prefWidth="90" style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-size: 12px; -fx-font-weight: bold; -fx-background-radius: 4; -fx-cursor: hand;" text="ADD">
                    <graphic><FontAwesomeIcon fill="white" glyphName="PLUS" size="1em" /></graphic>
                </Button>
                <Button fx:id="btnEditItem" prefHeight="36" prefWidth="90" style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-font-size: 12px; -fx-background-radius: 4; -fx-cursor: hand;" text="EDIT">
                    <graphic><FontAwesomeIcon fill="white" glyphName="PENCIL" size="1em" /></graphic>
                </Button>
                <Button fx:id="btnClearFields" prefHeight="36" prefWidth="90" style="-fx-background-color: #FF9800; -fx-text-fill: white; -fx-font-size: 12px; -fx-background-radius: 4; -fx-cursor: hand;" text="CLEAR">
                    <graphic><FontAwesomeIcon fill="white" glyphName="ERASER" size="1em" /></graphic>
                </Button>
                <Button fx:id="btnRemoveItem" prefHeight="36" prefWidth="100" style="-fx-background-color: #F44336; -fx-text-fill: white; -fx-font-size: 12px; -fx-background-radius: 4; -fx-cursor: hand;" text="REMOVE">
                    <graphic><FontAwesomeIcon fill="white" glyphName="TRASH" size="1em" /></graphic>
                </Button>
            </HBox>
        </VBox>

        <!-- Items Table -->
        <TableView fx:id="tblOrderItems" style="-fx-background-color: white; -fx-background-radius: 6;" VBox.vgrow="ALWAYS">
            <columns>
                <TableColumn fx:id="colSrNo" prefWidth="60" style="-fx-alignment: CENTER;" text="Sr." />
                <TableColumn fx:id="colItemName" prefWidth="350" text="Item Name" />
                <TableColumn fx:id="colUnit" prefWidth="100" style="-fx-alignment: CENTER;" text="Unit" />
                <TableColumn fx:id="colQty" prefWidth="120" style="-fx-alignment: CENTER;" text="Quantity" />
            </columns>
        </TableView>

        <!-- Section 3: Order Summary -->
        <HBox spacing="12" style="-fx-background-color: white; -fx-background-radius: 6; -fx-padding: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 4, 0, 0, 1);">

            <!-- Left: Remarks -->
            <VBox spacing="4" HBox.hgrow="ALWAYS">
                <Label fx:id="lblRemarks" style="-fx-text-fill: #616161;" text="Xaora">
                    <font><Font name="Kiran" size="25.0" /></font>
                </Label>
                <TextField fx:id="txtRemarks" prefHeight="38" promptText="Xaora ilaha..." style="-fx-font-size: 14px; -fx-background-color: #FAFAFA; -fx-border-color: #E0E0E0; -fx-border-radius: 4; -fx-background-radius: 4;">
                    <font><Font name="Kiran" size="20.0" /></font>
                </TextField>
            </VBox>

            <Separator orientation="VERTICAL" />

            <!-- Center: Order Summary -->
            <VBox alignment="CENTER" spacing="6" style="-fx-padding: 0 15;">
                <HBox alignment="CENTER" spacing="10">
                    <VBox alignment="CENTER" style="-fx-background-color: #E8F5E9; -fx-background-radius: 4; -fx-padding: 8 15;">
                        <Label style="-fx-text-fill: #616161; -fx-font-size: 11px;" text="Total Items" />
                        <Label fx:id="lblTotalItems" style="-fx-text-fill: #2E7D32; -fx-font-size: 20px; -fx-font-weight: bold;" text="0" />
                    </VBox>
                    <VBox alignment="CENTER" style="-fx-background-color: #E0F2F1; -fx-background-radius: 4; -fx-padding: 8 15;">
                        <Label style="-fx-text-fill: #616161; -fx-font-size: 11px;" text="Total Qty" />
                        <Label fx:id="lblTotalQty" style="-fx-text-fill: #00796B; -fx-font-size: 20px; -fx-font-weight: bold;" text="0" />
                    </VBox>
                </HBox>
            </VBox>

            <Separator orientation="VERTICAL" />

            <!-- Right: Action Buttons -->
            <VBox alignment="CENTER" spacing="6">
                <HBox alignment="CENTER" spacing="6">
                    <Button fx:id="btnSaveOrder" prefHeight="40" prefWidth="100" style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-size: 12px; -fx-font-weight: bold; -fx-background-radius: 4; -fx-cursor: hand;" text="SAVE">
                        <graphic><FontAwesomeIcon fill="white" glyphName="SAVE" size="1em" /></graphic>
                    </Button>
                    <Button fx:id="btnNewOrder" prefHeight="40" prefWidth="90" style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-font-size: 11px; -fx-background-radius: 4; -fx-cursor: hand;" text="NEW">
                        <graphic><FontAwesomeIcon fill="white" glyphName="PLUS" size="1em" /></graphic>
                    </Button>
                    <Button fx:id="btnClearAll" prefHeight="40" prefWidth="90" style="-fx-background-color: #FF5722; -fx-text-fill: white; -fx-font-size: 11px; -fx-background-radius: 4; -fx-cursor: hand;" text="CLEAR">
                        <graphic><FontAwesomeIcon fill="white" glyphName="TRASH" size="1em" /></graphic>
                    </Button>
                </HBox>
            </VBox>
        </HBox>
    </VBox>

    <!-- RIGHT SIDE: Existing Orders Panel (40%) -->
    <VBox spacing="0" style="-fx-background-color: #FFFFFF; -fx-border-color: #E0E0E0; -fx-border-width: 0 0 0 1;">

        <!-- Panel Header -->
        <HBox alignment="CENTER_LEFT" spacing="8" style="-fx-background-color: linear-gradient(to right, #00897B, #26A69A); -fx-padding: 10 12;">
            <FontAwesomeIcon fill="white" glyphName="LIST_ALT" size="1.2em" />
            <Label style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: white;" text="PURCHASE ORDERS" />
            <Region HBox.hgrow="ALWAYS" />
            <Button fx:id="btnRefreshOrders" style="-fx-background-color: rgba(255,255,255,0.2); -fx-text-fill: white; -fx-font-size: 10px; -fx-background-radius: 12; -fx-cursor: hand; -fx-padding: 4 10;">
                <graphic>
                    <FontAwesomeIcon fill="white" glyphName="REFRESH" size="0.9em" />
                </graphic>
            </Button>
        </HBox>

        <!-- Search Filters Section -->
        <VBox spacing="8" style="-fx-background-color: #FAFAFA; -fx-padding: 10; -fx-border-color: #E0E0E0; -fx-border-width: 0 0 1 0;">

            <!-- Row 1: Date Range -->
            <HBox alignment="CENTER_LEFT" spacing="6">
                <FontAwesomeIcon fill="#00897B" glyphName="CALENDAR" size="1em" />
                <DatePicker fx:id="dpSearchFromDate" prefHeight="32" prefWidth="140" promptText="From Date" style="-fx-font-size: 14px; -fx-background-radius: 4;" />
                <Label fx:id="lblToDate" style="-fx-text-fill: #757575; -fx-font-size: 14px;" text="to" />
                <DatePicker fx:id="dpSearchToDate" prefHeight="32" prefWidth="140" promptText="To Date" style="-fx-font-size: 14px; -fx-background-radius: 4;" />
            </HBox>

            <!-- Row 2: Order No Search -->
            <HBox alignment="CENTER_LEFT" spacing="6">
                <FontAwesomeIcon fill="#00897B" glyphName="FILE_TEXT_ALT" size="1em" />
                <TextField fx:id="txtSearchOrderNo" prefHeight="30" promptText="Order Number" style="-fx-background-color: white; -fx-border-color: #E0E0E0; -fx-border-radius: 4; -fx-background-radius: 4;" HBox.hgrow="ALWAYS" />
            </HBox>

            <!-- Row 3: Supplier Search -->
            <HBox alignment="CENTER_LEFT" spacing="6">
                <FontAwesomeIcon fill="#00897B" glyphName="TRUCK" size="1em" />
                <TextField fx:id="txtSearchSupplier" prefHeight="30" promptText="paurvazadaracao naava Saaoqaa" style="-fx-background-color: white; -fx-border-color: #E0E0E0; -fx-border-radius: 4; -fx-background-radius: 4;" HBox.hgrow="ALWAYS">
                    <font><Font name="Kiran" size="22.0" /></font>
                </TextField>
            </HBox>

            <!-- Action Buttons -->
            <HBox alignment="CENTER" spacing="6">
                <Button fx:id="btnSearchOrders" maxWidth="Infinity" prefHeight="28" style="-fx-background-color: #00897B; -fx-text-fill: white; -fx-font-size: 10px; -fx-font-weight: bold; -fx-background-radius: 4; -fx-cursor: hand; -fx-padding: 5 14;" HBox.hgrow="ALWAYS">
                    <graphic>
                        <FontAwesomeIcon fill="white" glyphName="SEARCH" size="0.9em" />
                    </graphic>
                    <text>Search</text>
                </Button>
                <Button fx:id="btnPrintOrder" prefHeight="28" style="-fx-background-color: #7B1FA2; -fx-text-fill: white; -fx-font-size: 10px; -fx-font-weight: bold; -fx-background-radius: 4; -fx-cursor: hand; -fx-padding: 5 14;" text="Print">
                    <graphic>
                        <FontAwesomeIcon fill="white" glyphName="PRINT" size="0.9em" />
                    </graphic>
                </Button>
                <Button fx:id="btnCopyOrder" prefHeight="28" style="-fx-background-color: #FF5722; -fx-text-fill: white; -fx-font-size: 10px; -fx-font-weight: bold; -fx-background-radius: 4; -fx-cursor: hand; -fx-padding: 5 14;" text="Copy">
                    <graphic>
                        <FontAwesomeIcon fill="white" glyphName="COPY" size="0.9em" />
                    </graphic>
                </Button>
                <Button fx:id="btnCreateInvoice" prefHeight="28" style="-fx-background-color: #1976D2; -fx-text-fill: white; -fx-font-size: 10px; -fx-font-weight: bold; -fx-background-radius: 4; -fx-cursor: hand; -fx-padding: 5 14;" text="Invoice">
                    <graphic>
                        <FontAwesomeIcon fill="white" glyphName="FILE_TEXT" size="0.9em" />
                    </graphic>
                </Button>
                <Button fx:id="btnClearSearch" prefHeight="28" style="-fx-background-color: #9E9E9E; -fx-text-fill: white; -fx-font-size: 10px; -fx-background-radius: 4; -fx-cursor: hand; -fx-padding: 5 10;">
                    <graphic>
                        <FontAwesomeIcon fill="white" glyphName="TIMES" size="0.9em" />
                    </graphic>
                </Button>
            </HBox>
        </VBox>

        <!-- Existing Orders Table -->
        <TableView fx:id="tblExistingOrders" fixedCellSize="28" style="-fx-font-size: 11px; -fx-background-color: white;" VBox.vgrow="ALWAYS">
            <columns>
                <TableColumn fx:id="colOrderNo" minWidth="55" prefWidth="60" text="Order#" />
                <TableColumn fx:id="colOrderDate" minWidth="75" prefWidth="85" text="Date" />
                <TableColumn fx:id="colSupplierName" minWidth="100" prefWidth="120" text="Supplier" />
                <TableColumn fx:id="colOrderQty" minWidth="60" prefWidth="65" text="Qty" />
                <TableColumn fx:id="colOrderStatus" minWidth="60" prefWidth="70" text="Status" />
            </columns>
            <columnResizePolicy>
                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
            </columnResizePolicy>
        </TableView>

        <!-- Summary Footer -->
        <VBox spacing="0" style="-fx-background-color: linear-gradient(to bottom, #F5F5F5, #EEEEEE); -fx-padding: 0; -fx-border-color: #E0E0E0; -fx-border-width: 1 0 0 0;">
            <HBox alignment="CENTER" spacing="0">
                <!-- Pending -->
                <VBox alignment="CENTER" spacing="2" style="-fx-padding: 8 12; -fx-border-color: #E0E0E0; -fx-border-width: 0 1 0 0;" HBox.hgrow="ALWAYS">
                    <Label style="-fx-font-size: 9px; -fx-text-fill: #9E9E9E;" text="PENDING" />
                    <Label fx:id="lblTotalPending" style="-fx-font-size: 13px; -fx-font-weight: bold; -fx-text-fill: #FF9800;" text="0" />
                </VBox>
                <!-- Completed -->
                <VBox alignment="CENTER" spacing="2" style="-fx-padding: 8 12; -fx-border-color: #E0E0E0; -fx-border-width: 0 1 0 0;" HBox.hgrow="ALWAYS">
                    <Label style="-fx-font-size: 9px; -fx-text-fill: #9E9E9E;" text="COMPLETED" />
                    <Label fx:id="lblTotalCompleted" style="-fx-font-size: 13px; -fx-font-weight: bold; -fx-text-fill: #4CAF50;" text="0" />
                </VBox>
                <!-- Total -->
                <VBox alignment="CENTER" spacing="2" style="-fx-background-color: #00897B; -fx-padding: 8 12;" HBox.hgrow="ALWAYS">
                    <Label style="-fx-font-size: 9px; -fx-text-fill: rgba(255,255,255,0.7);" text="TOTAL" />
                    <Label fx:id="lblTotalOrders" style="-fx-font-size: 13px; -fx-font-weight: bold; -fx-text-fill: white;" text="0" />
                </VBox>
            </HBox>
        </VBox>
    </VBox>
    </SplitPane>
</AnchorPane>
